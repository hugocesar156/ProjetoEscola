@model ProjetoEscola.Models.Aluno.Aluno

@{
    ViewData["Title"] = "ProjetoEscola - Cadastro de aluno";
}

<form asp-action="ValidarCadastro" data-ajax="true" data-ajax-method="post" data-ajax-begin="$('#area-submit').remove()"
      data-ajax-loading="#area-carregamento" data-ajax-update="#div-render">
    @Html.AntiForgeryToken()
    <div class="row text-center mt-4">
        <h4>Cadastro de aluno</h4>
    </div>
    <div class="row justify-content-center mt-4">
        <div class="col-8">
            <h5>Aluno</h5>
        </div>
    </div>
    <div class="row justify-content-center mt-1">
        <div class="col-8 col-md-5">
            <label for="nome">Nome</label>
            <input asp-for="Nome" id="nome" type="text" class="form-control" 
                   required maxlength="50" placeholder="Informe o nome completo">
            <span asp-validation-for="Nome" class="span-danger"></span>
        </div>
        <div class="col-8 col-md-3 mt-3 mt-md-0">
            <label for="cpf">CPF</label>
            <input asp-for="Cpf" id="cpf" type="text" class="form-control cpf" placeholder="000.000.000-00" required>
            <span asp-validation-for="Cpf" class="span-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-3">
            <label for="nascimento">D.Nascimento</label>
            <input asp-for="Nascimento" id="nascimento" type="date" class="form-control" required>
            <span asp-validation-for="Nascimento" class="span-danger"></span>
        </div>
        <div class="col-2">
            <label for="sexo">Sexo</label>
            <select asp-for="Sexo" id="sexo" class="form-control select-2" data-width="100%"
                    data-container="body" data-title="Selecionar sexo" data-value="@Model.Sexo" required>
                <option value="F">Feminino</option>
                <option value="M">Masculino</option>
                <option value="I">Outro/Indefinido</option>
            </select>
            <span asp-validation-for="Sexo" class="span-danger"></span>
        </div>
        <div class="col-3">
            <label for="email">Email</label>
            <input asp-for="Email" id="email" type="email" class="form-control" 
                   placeholder="seuemail@email.com" maxlength="50">
            <span asp-validation-for="Email" class="span-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-4">
            <label for="telefone-1">Telefone 1</label>
            <input asp-for="Telefone1" id="telefone-1" type="text" class="form-control telefone"
                   required placeholder="00 000000000">
            <span asp-validation-for="Telefone1" class="span-danger"></span>
        </div>
        <div class="col-4">
            <label for="telefone-2">Telefone 2</label>
            <input asp-for="Telefone2" id="telefone-2" type="text" class="form-control telefone" placeholder="00 000000000">
            <span asp-validation-for="Telefone2" class="span-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-8">
            <label for="responsavel">Responsável</label>
            <select asp-for="IdResponsavel" id="responsavel" class="form-control select-2" data-width="100%"
                    data-container="body" data-title="Selecionar responsável" data-value="@Model.IdResponsavel">

                @foreach (var responsavel in ViewBag.Responsavel)
                {
                    <option value="@responsavel.Id">@responsavel.Nome</option>
                }

            </select>
            <span asp-validation-for="IdResponsavel" class="span-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center mt-4">
        <div class="col-8">
            <h5>Detalhes impotantes</h5>
        </div>
    </div>
    <div class="row mt-1 justify-content-center">
        <div class="col-8">
            <div class="accordion" id="accordion-aluno">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading-1">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#colapse-1"
                                aria-expanded="false" aria-controls="colapse-1">
                            Possui alguma deficiência?
                        </button>
                    </h2>
                    <div id="colapse-1" class="accordion-collapse collapse" aria-labelledby="heading-1" data-bs-parent="#accordion-aluno">
                        <div class="accordion-body">
                            <textarea asp-for="Deficiencia" id="deficiencia-descricao" type="text" class="form-control" maxlength="100"></textarea>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading-2">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#colapse-2"
                                aria-expanded="false" aria-controls="colapse-2">
                            Possui alguma alergia?
                        </button>
                    </h2>
                    <div id="colapse-2" class="accordion-collapse collapse" aria-labelledby="heading-2" data-bs-parent="#accordion-aluno">
                        <div class="accordion-body">
                            <textarea asp-for="Alergia" id="deficiencia-descricao" type="text" class="form-control" maxlength="100"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center mt-4">
        <div class="col-8">
            <h5>Endereço</h5>
        </div>
    </div>
    <div class="row mt-1 justify-content-center">
        <div class="col-2">
            <label for="cep">CEP</label>
            <input asp-for="Endereco.Cep" id="cep" type="text" class="form-control cep"
                   required placeholder="00000-000" oninput="BuscarEndereco(this.value)">
            <span asp-validation-for="Endereco.Cep" class="span-danger"></span>
        </div>
        <div class="col-4">
            <label for="logradouro">Logradouro</label>
            <input asp-for="Endereco.Logradouro" id="logradouro" type="text" class="form-control" 
                   required maxlength="30">
            <span asp-validation-for="Endereco.Logradouro" class="span-danger"></span>
        </div>
        <div class="col-2">
            <label for="numero">Número</label>
            <input asp-for="Endereco.Bairro" id="numero" type="text" class="form-control" 
                   required placeholder="000">
            <span asp-validation-for="Endereco.Bairro" class="span-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-3">
            <label for="bairro">Bairro</label>
            <input asp-for="Endereco.Bairro" id="bairro" type="text" class="form-control" 
                   required maxlength="30">
            <span asp-validation-for="Endereco.Bairro" class="span-danger"></span>
        </div>
        <div class="col-3">
            <label for="cidade">Cidade</label>
            <input asp-for="Endereco.Cidade" id="cidade" type="text" class="form-control" 
                   required maxlength="30">
            <span asp-validation-for="Endereco.Cidade" class="span-danger"></span>
        </div>
        <div class="col-2">
            <label for="uf">Estado</label>
            <select asp-for="Endereco.Uf" id="uf" class="form-control select-2" data-width="100%"
                    data-container="body" data-title="Selecionar estado" data-value="@Model.Endereco.Uf" required>
                
                @foreach (var estado in ProjetoEscola.Models.Aluno.Endereco.ListarEstados())
                {
                    <option value="@estado.Key">@estado.Value</option>
                }

            </select>
            <span asp-validation-for="Endereco.Uf" class="span-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-8">
            <label for="complemento">Complemento</label>
            <input asp-for="Endereco.Complemento" id="complemento" type="text" class="form-control" 
                   placeholder="Casa, prédio, condomínio, ponto de referência" maxlength="30">
            <span asp-validation-for="Endereco.Complemento" class="span-danger"></span>
        </div>
    </div>

    @if (ViewBag.Notificacao != null)
    {
        <div class="row justify-content-center mt-3">
            <div class="col-8">
                @{ await Html.RenderPartialAsync("_Notificacao"); }
            </div>
        </div>
    }

    <div id="area-submit" class="row justify-content-center mt-5">
        <button class="btn btn-primary col-8 col-md-4" type="submit">Salvar</button>
    </div>
    <div id="area-carregamento" class="row mt-5 justify-content-center" style="display: none;">
        <button class="col-8 col-md-4 btn btn-primary" type="button" disabled>
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Salvar
        </button>
    </div>
    <div id="area-submit" class="row justify-content-center mt-3 mb-4">
        <button class="btn btn-outline-danger col-8 col-md-4" type="submit">Voltar</button>
    </div>
</form>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/jquery-mask/jquery.mask.min.js"></script>
<script src="~/lib/select-2/select2.min.js"></script>
<script src="~/js/Shared/biblioteca.js"></script>